function MessageDialog(a,o){var r=bootbox.dialog({title:a,message:o,backdrop:!0});r.init(function(){setTimeout(function(){r.modal("hide")},5e3)})}function ShowModalEdit(a){if(void 0===a)return MessageDialog("Atenção","O usuário não foi selecionado."),!1;var o=location.protocol+"//"+location.host+"/unici_restserver/api/usuarios/"+a;$.ajax({url:o,dataType:"json",method:"GET",success:function(a){return $("#formUsuario").attr("method","PUT"),$("#formUsuario").attr("action",o),$("#formUsuario").attr("enctype",""),$("#formUsuario #nome").val(a.data[0].nome),$("#formUsuario #email").val(a.data[0].email),$("#formUsuario #email").attr("readonly",!0),$("#formUsuario #senha").attr("required",!1),$("#formUsuario #biografia").val(a.data[0].biografia),$("#formUsuario #foto-input").hide(),$("#formUsuarioModal #myModalLabel").text("Editar Usuário"),$("#btn-remover-usuario").removeClass("hidden"),$("#btn-remover-usuario").data("id_usuario",a.data[0].id),$("#formUsuarioModal").modal("show"),!1},error:function(a){return MessageDialog("Atenção",a.responseJSON.message),!1}})}function ResetForm(a){if("PUT"==a){var o=location.protocol+"//"+location.host+"/unici_restserver/api/usuarios";$("#formUsuario").attr("method","POST"),$("#formUsuario").attr("action",o),$("#formUsuario").attr("enctype","multipart/form-data"),$("#formUsuario #email").attr("readonly",!1),$("#formUsuario #senha").attr("required",!0),$("#formUsuario #foto-input").show(),$("#formUsuario")[0].reset(),$("#formUsuarioModal #myModalLabel").text("Novo Usuário"),$("#btn-remover-usuario").addClass("hidden")}else $("#formUsuario")[0].reset()}$(document).ready(function(){var a=$("#DataTableUsuarios").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.12/i18n/Portuguese-Brasil.json"},processing:!0,serverSide:!1,ajax:{url:$("#DataTableUsuarios").data("url"),type:"GET"},columns:[{data:"id"},{data:"nome"},{data:"email"}],select:!0});$("#DataTableUsuarios").on("click","tbody tr",function(){if(a.row(this,{selected:!0}).any()){var o=a.row(this,{selected:!0}).data();ShowModalEdit(o.id)}}),$("#btn-atualiza-datatable").click(function(){return a.ajax.reload(),!1}),$("#btn-submit-form").click(function(){return $("#formUsuario").submit(),!1}),$("#formUsuario").on("submit",function(o){o.preventDefault();var r=$(this).attr("action"),e=new FormData(this),t=$(this).attr("method");$.ajax({type:t,url:r,data:e,dataType:"json",cache:!1,contentType:!1,processData:!1,beforeSend:function(){$("#btn-submit-form").prop("disabled",!0)},success:function(o){return $("#formUsuarioModal").modal("hide"),MessageDialog("Informação",o.message),a.ajax.reload(),$("#btn-submit-form").prop("disabled",!1),ResetForm(t),!1},error:function(a){return MessageDialog("Atenção",a.responseJSON.message),$("#btn-submit-form").prop("disabled",!1),!1}})}),$("#btn-remover-usuario").click(function(){var o=confirm("Deseja realmente excluir esse usuário?");if(o){var r=location.protocol+"//"+location.host+"/unici_restserver/api/usuarios/"+$(this).data("id_usuario");$.ajax({url:r,type:"DELETE",dataType:"json",success:function(o){return $("#formUsuarioModal").modal("hide"),MessageDialog("Informação",o.message),$("#btn-remover-usuario").addClass("hidden"),$("#btn-remover-usuario").removeData("id_usuario"),a.ajax.reload(),!1},error:function(a){return MessageDialog("Atenção",a.responseJSON.message),!1}})}return!1}),$("#formUsuarioModal").on("hidden.bs.modal",function(){var a=$("#formUsuario").attr("method");ResetForm(a)})});